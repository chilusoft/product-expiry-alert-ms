{% load crispy_forms_tags %}
<div class="row">
  <div class="col lg-2">
    <div>
      <h3>Product Types</h3>
      <canvas id="myChart"></canvas>
    </div>
  </div>
  <div class="col lg-2">
    <div>
      <h3>Product Types</h3>
      <canvas id="myChart2"></canvas>
    </div>
  </div>
  <div class="col lg-2">
    <div>
      <h3>Product Types</h3>
      <canvas id="myChart3"></canvas>
    </div>
  </div>
  <div class="col lg-2">
    <div>
      <h3>Actions</h3>
      <div>
        <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
  Add Product
</button>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="container mt-5"><h2>Add New Product</h2>
          {% crispy create_product_form %}
      </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div>
    </div>
  </div>
</div>
      </div>
    </div>
  </div>
 
</div>

<div class="row">
  <div class="col-lg-12">
    <div id="table-wrapper">
      <h3 class="heading">Product Data</h3>
      <table id="product-table" class="display">
        <thead>
            <tr>
                <th>Product Image</th>
                <th>Product Name</th>
                <th>Batch No.</th>
                <th>Category</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
          {% for product in products %}  
          <tr>
                <td>
                  <img src="{{product.image.file}}" alt="" srcset="" width="56" height="56">
                </td>
                <td>{{product.name}}</td>
                <td>{{product.batch.batch_id}}</td>
                <td>
                  {{product.product_category.value}}
                </td>
                <td>
                  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#edit-product{{product.id}}">
                   edit
                  </button>
                  <!-- Modal -->
                <div class="modal fade" id="edit-product{{product.id}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="staticBackdropLabel">Edit Product ID: {{product.id}}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <div class="container mt-5">
                          
                      </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Understood</button>
                      </div>
                    </div>
                  </div>
                </div>
                </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="4">No Product Data</td>
            </tr>
          {% endfor %}
        </tbody>
    </table>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="//cdn.datatables.net/2.1.8/css/dataTables.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="//cdn.datatables.net/2.1.8/js/dataTables.min.js"></script>

<script>
  
  
  const ctx = document.getElementById('myChart');
  const ctx1 = document.getElementById('myChart2');
  const ctx2 = document.getElementById('myChart3');




  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
      datasets: [{
        label: '# of Votes',
        data: [12, 19, 3, 5, 2, 3],
        backgroundColor: [
          'rgb(255, 99, 132)',
          'rgb(54, 162, 235)',
          'rgb(255, 205, 86)'
        ],
        hoverOffset: 4
      }]
    }
  });

  new Chart(ctx1, {
    type: 'doughnut',
    data: {
      labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
      datasets: [{
        label: '# of Votes',
        data: [12, 19, 3, 5, 2, 3],
        backgroundColor: [
          'rgb(255, 99, 132)',
          'rgb(54, 162, 235)',
          'rgb(255, 205, 86)'
        ],
        hoverOffset: 4
      }]
    }
  });

  new Chart(ctx2, {
    type: 'doughnut',
    data: {
      labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
      datasets: [{
        label: '# of Votes',
        data: [12, 19, 3, 5, 2, 3],
        backgroundColor: [
          'rgb(255, 99, 132)',
          'rgb(54, 162, 235)',
          'rgb(255, 205, 86)'
        ],
        hoverOffset: 4
      }]
    }
  });



// this part load the datatable


	
let table = new DataTable('#product-table');
  
$(document).ready( function () {
  $('#product-table').DataTable();
} );
 
</script>